jQuery(document).ready(function(f){var h=f(this),e=f("body");var c={sortable:{axis:"y",start:function(i,j){j.placeholder.height(j.item.height())},stop:function(i,j){j.item.parent().kcReorder(j.item.data("mode"),true)}},colorpicker:{onBeforeShow:function(){f(this).ColorPickerSetColor(this.value)},onSubmit:function(i,m,k,l){var j="#"+m;f(l).css({backgroundColor:j,color:j}).val(j).ColorPickerHide()}},datepicker:{date:{dateFormat:"yy-mm-dd",changeMonth:true,changeYear:true,showButtonPanel:true},month:{changeMonth:true,changeYear:true,dateFormat:"yy-mm",beforeShow:function(j,i){i.dpDiv.addClass("kcDPMonth")},onChangeMonthYear:function(i,k,j){f(this).val(f.datepicker.formatDate("yy-mm",new Date(i,k-1,1)))},onClose:function(j,i){setTimeout(function(){i.dpDiv.removeClass("kcDPMonth")},300)}}}};f("#kc-settings-form").kcMetaboxDeps();f.kcRowCloner();f.kcRowCloner.addCallback("add",function(i){f("ul.kc-rows").sortable("refresh");f(".hasDatepicker",i.nuItem).each(function(){f(this).removeData("datepicker").removeClass("hasDatepicker").datepicker(c.datepicker[f(this).attr("type")])});f(".hasColorpicker",i.nuItem).each(function(){f(this).removeData("colorpickerId").removeAttr("style").ColorPicker(c.colorpicker)})});f("ul.kc-rows").sortable(c.sortable);f(".kcs-tabs").kcTabs();var b=f("input[type=date], input[type=month]");if(b.length&&Modernizr.inputtypes.date===false){Modernizr.load([{load:kcGetSNS("jquery_ui_datepicker",kcSettings.js).concat(kcGetSNS("jquery_ui",kcSettings.css)),complete:function(){b.each(function(){f(this).datepicker(c.datepicker[f(this).attr("type")])})}}])}var d=f("input[type=color]");if(d.length&&Modernizr.inputtypes.color===false){Modernizr.load([{load:kcGetSNS("jquery_colorpicker",kcSettings.js).concat(kcGetSNS("jquery_colorpicker",kcSettings.css)),complete:function(){d.ColorPicker(c.colorpicker).each(function(){var i=f(this).addClass("hasColorpicker");if(i.val()!==""){i.css({backgroundColor:this.value,color:this.value})}})}}])}f("select.chosen").kcChosen();var g=f("#addtag");if(g.length){var a=f();f("div.kcs-field").each(function(){a=a.add(f(this).clone())});if(a.length){g.ajaxComplete(function(j,k,i){if(i.data.indexOf("action=add-tag")<0){return}f("div.kcs-field").each(function(l){f(this).replaceWith(a.eq(l).clone())});f(".kcs-tabs",g).kcTabs();g.trigger("kcsRefreshed")})}}});