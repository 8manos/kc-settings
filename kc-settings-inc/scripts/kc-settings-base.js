Array.prototype.unique=function(){var b=this.concat();for(var d=0;d<b.length;++d){for(var c=d+1;c<b.length;++c){if(b[d]===b[c]){b.splice(c,1)}}}return b};function kcCountObj(c){var b=0;for(var a in c){if(c.hasOwnProperty(a)){++b}}return b}function kcsbSlug(a){strNu=a.replace(/^\-+/,"");strNu=strNu.replace(/^_+/,"");strNu=strNu.replace(/[^A-Za-z0-9\-_]/g,"");if(strNu.match(/^\-+/)||strNu.match(/^_+/)){strNu=kcsbSlug(strNu)}return strNu}function invertColor(a){inverted=new RGBColor(a);if(inverted.ok){a="rgb("+(255-inverted.r)+", "+(255-inverted.g)+", "+(255-inverted.b)+")"}return a}(function(e,i){var a="kcPostFinder",c=false,l=e(i),k=[".kc-find-post"],g,f,b,j,h,d=function(){return k.join(", ")};activate=function(){f=e("#find-posts-input");b=e("#find-posts-response");j=e("#find-posts-submit");h=e("#find-posts-close");j.on("click.kcPostFinder",function(q){q.preventDefault();if(!g.data("kcTarget")){return}var o=b.find("input:checked");if(!o.length){return false}var m=g.data("kcTarget"),p=m.val(),p=p===""?[]:p.split(","),n=o.val();if(m.is(".unique")){m.val(n)}else{if(e.inArray(n,p)<0){p.push(n);m.val(p.join(","))}}});l.on("dblclick.kcPostFinder",'input[name="found_post_id"]',function(){j.trigger("click.kcPostFinder")});l.on("click.kcPostFinder","#find-posts-close",function(){f.val("");g.removeData("kcTarget")});c=true},deactivate=function(){unbind();j.off("click.kcPostFinder");l.off("dblclick.kcPostFinder");l.off("click.kcPostFinder");g=f=b=j=h=null;c=false},action=function(m){g.data("kcTarget",e(this));findPosts.open()},bind=function(){l.on("dblclick.kcPostFinder",d(),action)},unbind=function(){l.off("dblclick.kcPostFinder",d(),action)},publicMethod=e[a]=function(m){var n=this;if(c){if(!m){return}unbind()}else{g=e("#find-posts");if(!g.length){return}activate()}if(m){k=k.concat(m.split(","))}bind();return n};publicMethod.destroy=function(){deactivate()}}(jQuery,document));(function(g,l){var c="kcRowCloner",d=false,n=g(l),i={add:[],del:[]},f=function(){k();d=true},b=function(){o();d=false;i={add:[],del:[]}},e=function(v){var t=g(v.target),s;if(t.is("a.add")){s=p}else{if(t.is("a.del")){s=m}else{return}}v.preventDefault();var q=g(v.currentTarget),u=!q.next(".row").length,r=q.parent();s.call(v,{anchor:t,item:q,mode:q.data("mode"),isLast:u,block:r})},p=function(r){var s=this,q=h(r.item.clone(true).addClass("adding").hide());g("[data-dep]",q).removeData("kcfdInit");g(".hasdep",q).kcFormDep();r.item.after(q);r.nuItem=q;r.block=r.block.kcReorder(r.mode,true);a("add",s,r);r.nuItem.fadeIn("slow",function(){r.nuItem.removeClass("adding")})},m=function(q){var r=this;if(!q.item.siblings(".row").length){q.item=h(q.item);q.item.find(".hasdep").trigger("change");q.removed=false;a("del",r,q,"pret")}else{q.removed=true;q.item.addClass("removing").fadeOut("slow",function(){q.item.remove();if(!q.isLast){q.block=q.block.kcReorder(q.mode,true)}delete q.item;a("del",r,q)})}},h=function(q){q.find(":input").each(function(){var r=g(this);if(r.data("nocleanup")===true){return}if(r.is("select")||this.type=="text"||this.type=="textarea"){r.removeAttr("style").val("")}else{if(this.type=="checkbox"||this.type=="radio"){r.prop("checked",this.checked)}}});return q},a=function(u,t,r,q){for(var s=0;s<i[u].length;s++){i[u][s].call(t,r)}},k=function(){n.on("click.kcRowCloner","li.row",e)},o=function(){n.off("click.kcRowCloner","li.row",e)},j=g[c]=function(){var q=this;if(d){return}f();return q};j.destroy=function(){b()};j.addCallback=function(q,r){if(i.hasOwnProperty(q)&&g.isFunction(r)){i[q].push(r)}}})(jQuery,document);(function(a){var b=a(document);a.fn.kcGoto=function(c){defaults={offset:-20,speed:800};c=a.extend({},defaults,c);return this.each(function(){var d=a(this);d.fadeIn(function(){a("html, body").stop().animate({scrollTop:(d.offset().top+c.offset)},c.speed)})})};a.fn.kcsbUnique=function(){return this.each(function(){var d=a(this),c=d.val();d.data("olVal",c).blur(function(){var g=a(this),f=d.data("olVal"),e=g.val();if(e!=f&&a.inArray(e,kcSettings._ids[g.data("ids")])>-1){g.val("")}})})};a.fn.kcsbCheck=function(){var c=a(this);if((c.attr("name")==="kcsb[id]"&&c.val()==="id")||c.val()===""){c.val("").focus().css("borderColor","#ff0000");return false}else{c.removeAttr("style")}};a.fn.kcFormDep=function(d){var e={disable:true,callback:function(){}},d=a.extend({},e,d),c=function(g){var f=a(g.target),h=f.val();f.data("depTargets").each(function(){var k=a(this);if(g.kcfdInit===true){if(k.data("kcfdInit")){return}else{k.data("kcfdInit",true)}}var j=k.data("dep"),i=false;if(!f.prop("disabled")&&(((typeof j==="string"||typeof j==="number")&&j==h)||(typeof j==="object"&&a.inArray(h,j)>-1))){i=true}k.toggle(i);if(d.disable===true){k.find(":input").prop("disabled",!i).trigger("change")}})};return this.each(function(){var f=a(this),h=f.val(),g=(f.data("scope")!==undefined)?f.closest(f.data("scope")).find(f.data("child")):a(f.data("child"));if(g.length){f.data("depTargets",g).on("change",c).trigger({type:"change",kcfdInit:true})}})};a.fn.kcReorder=function(j,e){var h=new RegExp(j+"\\]\\[(\\d+)"),g=new RegExp(j+"\\-(\\d+)"),d=a(this);if(e===true){var f=d.children(),c=0}else{var f=d,c=d.index()}f.each(function(){var i=a(this);i.find(":input").each(function(){this.name=this.name.replace(h,function(l,k){return j+"]["+c});if(this.id!==""){this.id=this.id.replace(g,function(l,k){return j+"-"+c})}});i.find("label").each(function(){var k=a(this),l=k.attr("for");if(l!==""&&l!==undefined){k.attr("for",l.replace(g,function(n,m){return j+"-"+c}))}});c++});return this};a.fn.kcTabs=function(){var c=function(g){g.preventDefault();var d=a(g.currentTarget),f=d.parent();if(f.hasClass("tabs")){return}d.closest("ul").data("kcTabsPanels").hide().filter(d.data("kcTabsPanel")).show();f.addClass("tabs").siblings().removeClass("tabs")};return this.each(function(){var e=a(this),d=a();$panels=a();e.children().each(function(f){var g=a(this).children("a").first();if(!g.length){return}var h=a(g.attr("href"));if(!h.length){return}$panels=$panels.add(h);d=d.add(g);g.data("kcTabsPanel",h).on("click",c)});e.data({kcTabsPanels:$panels,kcTabsAnchors:d});d.first().trigger("click")})};if(!Modernizr.details){b.on("click","summary",function(f){if(a(f.target).is("a")){return}var c=a(this),d=c.parent();if(d.attr("open")){d.removeAttr("open")}else{d.attr("open","open")}})}})(jQuery);